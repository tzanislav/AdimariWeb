// src/hooks/useSmoothScroll.js
import { useEffect, useRef } from 'react';

const useSmoothScroll = (dependency) => {
  const targetRef = useRef(null);
  const hasScrolledRef = useRef(false);

  useEffect(() => {
    if (!dependency || hasScrolledRef.current) return;

    // Function to perform the scroll if needed
    const handleScroll = () => {
      if (!targetRef.current) return;

      const { innerHeight, innerWidth } = window;

      // Check if the screen height is greater than the width
      if (innerHeight / innerWidth > 1) {
        // Smooth scroll to the target div
        targetRef.current.scrollIntoView({ behavior: 'smooth' });
        console.log('scroll to target');
        hasScrolledRef.current = true; // Set the flag to indicate scroll has been performed
      }
    };

    // Run the scroll check after content is loaded
    handleScroll();

    // Optional: Add a resize event listener to handle changes in screen size
    window.addEventListener('resize', handleScroll);

    // Clean up event listener on component unmount
    return () => window.removeEventListener('resize', handleScroll);
  }, [dependency]);

  return targetRef;
};

export default useSmoothScroll;
